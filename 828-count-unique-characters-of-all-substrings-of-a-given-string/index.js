/**
 * @param {string} s
 * @return {number}
 */

let s
s = 'ABC'
s = 'ABA'
s = 'LEETCODE'
s = 'FHTLQNZMYRPOWTRQUAOQAQUGXFTYSTGOXFFTMGSGBNPLBHFVAZCGOSPAVJWZLVWKYLQNCOQDSXXIZGLCEBWFFMTMHPGGZRSKDAOEWXOANVIOUFMQIIJPWKSKPNWENOUGDHAVLDNNDGBFGZDEJMBHXQSDRVSXAMRVBZSCQLUFPFJKBGJLUHNJGNANADMRMKEPWWSCGGXKOTFPDJWHDEJWXTUBPAXUFVEIWJZSCXXFSGEVUHGHKSRYTGBVYESVLUXJTGGNCHHCGNBBIFBZBXNAOMOQFTZKRVRJGFUEAOZSDPPACNLSEWOVHXZCKBVEEGIXEEBPGWGOQMJHLWLXEKFPMKRKGWZJSRCISPWEKGAROFURJCMPECDTGGEOGYZDEOOAXPMLNUZHNLHCKMDUYQCNOTPQWQIHJVMAJJBISGOYYMPWMURBHOLQLAXECAPWANEKCPXNOXCAPINAOOCTKISGQQLTVCYYJXFBEJYOMOJSGTHAXLOGXNJGWNYPADHJADPRMKJCQKUZBAGRATVQTGKJGUYFTTCAFMCTPRYIDUBBHWLUWCUYNQZKGOHSJSNFESZIIFREXGTKBFZAFVVKPAOTJIQYLGOMJJVRERTRACFEBREGUMKKBIZBDHYHVNZZJCNXFLXMCESKUJPLMUPDQUZDZQZGOWYORPPEWLFPWTJDJDXVYZTCBBNNUQPKYCAEQUCVAPNRDIJMKBRNVWWPRCBUFKWHZHONOBVAYXFSHLFWKEVLKLKVKJOYZGPWGILCBQRBTKKFIOPCGLJXQBHDUXUXRGFIPTSJHKJBRRDFOBVYXWQMQHXOWYJGVYPGTEHGOIZLYIPIIBZHYAQXBXTXILRTINXFYYUYPRSPYROCGMCKWQBGEUKCCWTWGSBPVXUPCOIVRVXOKHXABAZBBUAIBFBCCVFMGPHPSTPYXTQIZECDFBOYSIJFLJNCGDLHNSBQMBCEDITIEJFMAURQERAOLMYDJPRCTAYQLWFLHIZBBEHVTAAOXODAILKLYCQRZEDHPIKAIRILHENVANJWDCWFKVXORODDBPWOMRLRORUXEBEVJNPYWRDLWRIFVZJZKEWCDQVLLFRNPUVDVJHOBGLPYAXVZOKKBWIAPAOQTPXPJIZNNXOAJMDQXAPJWCMJCKNWGWBJPREEPGFFKUALUKCBAHSBUGVKRFMCBMMFSSCWACZHLDNSQAJJSJEIKGQFAYQIFKSLOWOHVXJPVKPATYNUNJLEEBQAVTRNKPQUDRONEIKVDPYUQLZGUPDXBTRBZCASHLOGEIQIQYQSMJMXVOZBTPBRWZZAMZCVEJMAKGMTXFSWCCPKAYMASWLDEAUTANNTMQGPJNEXPSLFVEKKNBIQHBWBZSIANUQWNXGBITAHKEEIZLDQDFJGBBPTDGAPWITALUQYFLQOTXABJNZYZNJMVEUMUKCQQFJCXONBFRIXUEWJMJPZLCATMEIKEEOMSCWSOAFUAEYWPOEORFFFGBQGDIQBOQIVQHIULPBADBBDMGQVDXXSAYPXBCNTYKJWDBGDPVFXNJSHRQYZCZAXTUXPFEFGWWIJWIFRWDZXUUDYKPKWHLJKLWPTGDXZPDMVSWCTAKEBCYNEHLRKIXTODIFYRGMOQIRZMRJSHYVECIXJGZTPBWFVHTEWYEHHGRENZCPNNIBAXRSLHFNGQYJTECCWLGHVBZFWQROXVUNIMLSEDQRRUDHOQCYFFHHRTJLXAHPXXMAEPZKBJVDZHVBBVEGRWBCEBCZRODJPEAMNGUERPHTTGMPHGOLOHTKQQOJCXOJZSHAEHEAERERYDXNIQHATJXXSKWMGKJWKWMEZVYXHSUUVFIFINEEKWGRKXMHBHALXKTXRMSPXDGQECRYZRLMHCCUQOJNGGBXNRNCVNPWAWVBLYCVAKYQMCFTGQEOGJSZBKNFMJIRAQEBGOSZHDWKQGUMCLKQJXALKJPMLBSCEPCAWEKJLWDKZRYAOHYRRJDWGPBOQAODMLHCEMWDPIEBBAPYDXUMGRYCXVFAELVIVOPCEXBERIJWFVMBRUKLWXRZRZTRSUVFKRUYMPSZNNDAGYRMEKSRUFYAQRJDBLVEYPSPEIRCBCAKDHKEBWAWJHTUZAOBUDIFUIHHSELHHUATAEZNEEXUNWYCAZJUMECPTITQHTGQSLXCERMXHSAERXUPKZMSCTIWUOTNPVVADNAEWRTKHCXHNCRHJLFHWEZGDFNEIWRWOCKEZGCMGVLIPUDEADYSXNYRNKCCNEYECWHNZZKUPJHFGCRHMFPTZSLMTVTYCBCUWJLOUMGTDKMOLRNPGDLPLKIMYIEANCCZHDIAYEDLBHTYHOKOFLHDLUQSXFTHETKFIWRGUZCFHDFLSAXERGYXQNMLEXAAYMKMGFNJZCKBUZJIMSRPYWTEMWSKSSCRSGLXFJCSGFDBFEMZSSUKQYTILXBLUBPAPCJMFOYFKIFFPVOLXTNICFHCFDIKEQREQFEBFGUSKZDBPXKZHRPSIKVIJBSWNRPJNBIKAQGKRCJRGAMHXJBJACJJPATTCVNATAJEYABADLSPNHJYDMYRMMITHHPXFBHTQXPLPARGOLEOYODOXZBULBCUWFJNRRBMZWLITHXVJNYELPHXVVQCMFCGLTGNKQFCTFCFKTFQCDFIODUPWXMRRCDUAHWPIRGHHKCVGSZUOATZOISQPVRSVNFYJJVYNESLIBBLVAYMCHIXVVWWQHSCVTOZMXJIDDIQPFBWHSSIHHNXVQJBNYACNWLWVJBGVVVHECMQMSQRZLRWGDBWKMEOULQCTXFBUYNYPPDEQXMANPSDKHUQDLPXZAORDSDTIKLEEVFHTRBSXVJNTKZXIXWKAADZACRRRYREQQPJQPGENVIOBNITWSZLZNFBDAFDBLIGENQETMSNUCRVXWGWPJFPIXKFKFPEMSGLNMQBCGKNGBVDEAWQUPMEVFKKRIXDMZJPFMABWTNPCUROVENTJCBWZDPAMGEMEOICRUUYCAHBRMADUCNTBXBXILOGUZYNXYQQBBUVKXOGGDXOVOQXBLYXTFGFWRQSGLJCGXCYRRIGMCXOVHUSSAPZEIPOOEXMAUUOGTNOZEBAWBWDATZUCALLCACWDEKMYQUUIXSHKYTFQAHFCACWQNHMEBQZDINTBPCGVLMBYFIOENISVZATYPWZTFTHCANQTKHABCEQJOIIIJQRIEBHYDQQSCOVQCUTSGZBYTKEVZCGGENNNXTSKKWSNFSJTBECGSOIMZBWYWJJUNRMHPDNIKNVBJEUVDXAGBQVDMQLWQJNLSDBYDJPKPEJZHETEPQIRHLFAFOYGYGFCCBXWFOXWGOXRURDYFMCSODYULCMXHLBQTCIBQGSLSMILOXMZMVDFDEJJTCUSVJNVRKQVENJFGBFLNDJGBDUKDXAISJVGJQGNJWPBQQIKFUDKLLMAIGGAPRZCKTUBHGYATADTQNWKBIGHQYWXDGLJOFTEALQRWZHPQVCRFQWVSPJZUMHSXRDZPEKHTTFBUQQAGTRRAPTKBRTABWPTIOMBXFTJGGMKLKNEBPUYWBQABOGXYAINOQVDHKCDKTXERKMCELNKJWMMZWVVSNHXQQIEJCDZTWUUBJPVTNLYOXIVSCSAWMFREVNLYAOPOHAGBZMDWWEYFFFRHTZYYXLCUYGWZRXKEMGRZOYXQEPDVIDWPJWVLWBDHWVRJPAANBMDMAOKTTVDYZFIDAKXTMKNTJVXMFHWJJQSQDUQUAJBHDENVMIHFBZNMTXOHTGONJCOPZURBEENIPQCWRKEKGZSADCEOBRBLFJEDJBVDTCFKYQUQOXFGKPVBRHNTROZZICMHOENWFEAVUCKQFHCZOTJHMNFRDTDAXIJZEDAEBZGBURRSROKJZMCNTUONWSINOXCCJAUMVUGWKRGYFMBNLNAJQZWAXLCVRKCNLXTABCXGRVNJCUDAUIVBGBCDHCJWYNBJKOKQUQBJOQKJKSCEVUOMKXZLTFZTTOHYALFOXRVZVYSDVPUWQFYAROFBMZDGUIBGGBKFNZFMQFYWKBZZXFLPWVMBSNCNCPHPCATRIWCPPEWGOYMEQOUGCAJJCWLPWEFGONRUEFYLBCBDMNSLXCDGBFWRFALPLJCALMFECDCUEPQDFIUBTCQNGVXOWGQTBRDXCYTSQZQBALPTMZGONWCJBNUZZTLKNQRYLUKULGUWKWFSOAODAOMKWCYEPWDXLKLOQGKKXSERNVKFWURTIUZEKSMEHLTODTTAUCKYGYJMMMJFKKMSUSZTWAJSVXEZHCYFOEHOFHPCWQPXWBMYFEQCRKEGXOAYNGPYHOEPCXWKLQMSEUXHPDRTTRVJEROTOWTQQZVYGKVDSLJJBHXRVNMZDMMHLBUEHPKGFGVWHEOWPOCFJVVYHQDNEAJQDGJEUSWIRSNBBYQLRGYDHWJGJYREABXREGYJFNKZEJVIEZMMKPXPRWZNBZZOXCBMRARXONUFVZFFCLGUYQTQUGIXHQIZJVTDJNLHVWPHNVGXQYKFVAOCUECNLYOFUXHJIGYXBZZMADKRCOWCMXABIENXMTNQFYYOKGPNYDZXYJKQRVKVBBBSAYHOBUJDBYQCDVRCZMOCNSHHTGMQJYXPMHLLRXBSOXIZWYGZBDJJYGCNIZBAYTUCVTJDHYCDZHQDFSOHYWGGOSQLZYKQRFEOZNYKGVAPHBVTHKWOTWUFEYYDKGBEDOWNNXQZRJQQEUQNHXKBDXYSUKGWZNPSUXJFWLTIRJFLCJKOZHWHNXNMZZVBUVXHZBYEINCNTRRMUWJOXIVEQLSRPVHQNHHTJFXGGALHPZLHXSSGRGWUDAEQEPZCIBNOFTQNTGHNWJIQQVEWVRHXLYPREDSPFAKFKWTIPVJPWFHTZTNMVVQUOZTQQKZGMXZQWRUMRRYSUQNMHAZXKZCFGHUASQARKUUIQYEQXWODDKYIVZPWQJTMJNAWRPLDXVVKWNBMXRYIACWFJMTQLTGUTQTDCCRCORBYKJUWPMPBSVHNEUQZHVQOMRYWJPDRAUPBFZKFRRFZIWOFZERLLBYOMIVOREAXFTZRCVHUAUJBKBCZBIDOUKYOUJIUVDTDBYROIUHDLFHLDUUUISAVNELNAWVLRGWKZDOWPGDMTOTOJNIOAAOXXOJMDJFAGIGKYQVKGLMJXEPPZCJZCREGSUCWPKGBQWNBYWONYPJUHOJOKXMQTTIZXSCELQKGCIHPIMBLIQGWCBDMRENZEDNCNJGERDPYJFVZOPMSPPMKGASDUHKXTYIWVMTBQXCBIYSBGRLCOVEOVUIKILSHIMDHHAWLKFRORCFOKYTPTWIHNDTGXJAKBGDKTGCAHHBLVXGZPNOAMHKFSNZXKMJFQQWSKBOYGXCDLVHUPWYURPJCHWIEAZCDYNDKCADSUWQXBSODXFVSVCEBNRGAJZCTOCZTNCREENPWDJDWHYWXHXSHHRWFIJPTHTEWZMCHDXCPIVMENKVKMFOIBVADQLTLPZBCTQCJXPVSORETUJDGMVIJHNTYBUDBILLVSYLTWBUKNROYTXZGEIHGWSJEHEUAZEQDFNJHBECAGFCBRCRNVCVLBWUKJSBQYUYNHVJUUDPYIUBIMOQVQOKIUFRIDONTRPEBDPHFJMQADTHQKHYHLEQLIJBPCZCZUKBHGQPBRXYEKVPEJSFSUBTYLBYHYBSVMVBJALBMMNFZTXHAJQWSMSFDGVSYPPQDKYBVNJJLJLXBMZJMVNCSSTXUNWFLBRLZPYXKJUPKCKEHBOWJPGKYNBCUEUKHSKJAQUABERYJHOKCWCBGKBGPSIJJFFGCNKAIKDAHXDDVKRDWUWMXKJZZTTFDLOFTLTFPVJAPJYEINNNSMKOVXIQNXXKONBSRGWOTVFFZRIZOMKNITYJRUMESEYLTCOPFSJTHILAXCFWETVJCSVFCEFBEZYRGGKNIBXOBRQYKNSWITKUDYZMJEBCKWFGKBMIQTQMHUNPBYUXFNWQPWUXQPAFGQPJZMLBRAFEELGYNARGJWWVZZHIHFJSNEFIFYYAKQIEQLXPLBYNCSGNCXAXREPERJQXKJMUTMWBYJUKQJBGBMQFRMWEOIKSYSGEFCZQDZVYEGIBCWKQIOIKEQWAKMCSCDUNYDLZTJYHSIXBMYGYVTJAFNDSSUFBSMCUJOVNVMPGMQKPRLPFZVDPIQKZAZIFEWXFUONRHVBJYARVWRJGILIGSEQIBCJJZOTSZKGPMUMTXWVGUGCKWWGYVVLYZSKKZFOKYRKNWNWNEDPOMLMWPJVXAXTKZCDEUZBELWCDHGROTRBXKHWZWQGMMFZXYWBOVAAFNIPIBXGYGZECXEUAHRKMGXAWWFURIOMLFLNULIMEXPDDTGYISDUIJWRSIFUXGPMWVHVODZSSDAICKOJLRYUCLTWYEQUYGHCFMWVHOPPNMEOYOYRLOEGCXSOVAPAZYJYZIWYFSJGLENGMMDRVVKYPMWMEURFSZLKOGULUYVJDRWUIITNGAXXYRCNOPHEYPUFOBRUXMXUTURGMPEAJNCAXNXSMNHKMSGFPYRUNEBTWJDUPOMTBERSNDNVOFFHHEJXSNDNMXRNFBIELBUVWPPLYELKHNCKJMGFZZYKVHKLHCPIHJLZLNOPINQDMROONNNIVNOMHOXTXPPAFYGBHAFTILTBLBHADVERVYVDABOSQKOJSCEQUMKMQYSVCAMCRGSDBJCFASIHEQPYSPAHEOGEHCVLMDWSDYULYEZZBNYQQHUVTBCHFYZIKTINWZNGXGXPAKBZPLXPRUQDPYSPDBMIQNNIAYGBMKIVWHKDIZSZFXMROXJYZCSZPWZWEUCAYBWDOPJMPVZBYUNPJCXYXSHGSPTKDIEBFCGKMYNCNMRLMLJQZQJSMUHRQSWSVUUMBSEKVWYNGTDCWFPDFZIZNIOFHWGIWNEOHIDKLLMFGUPLERIUXOPGPLMSCATAHSQAWTEXGVVUJHWLMGNFPJHWCVLJJTCWSBESMBPLKZNBDUDFXEFFQEPSYVFIGRNOUVOUHLZXQEZVDBACLGNDBMBWABTFTVECQIBHLULOOREEMXMEPZKRKZLCGVJLFNICIIQBKEQBBLDLNVFFTRXQKNHLURXRNIZXVRCNEJSOCZPFOILJNHFBQHBQBYNBCPKRERRIZUUCYRLVUNWLDUXQMESRVTAAENACZZSLIYACQAVDHQKSCBJABHVQDNQVYDKOVZMTZEDBZYTQTVKVAYPXDNBWUUMACWYHYSCQWCELYRMYOECXAITJIKRDIVFZQOUBDAODMHCFAVGQUJYBYOATVBEYRFKEIARBJYGKXHWMVGLKKSWSJOEEYIDPFVKZGWENZBKZYQSSTFIULVEZELXNNVBFNAWMAVJVECVSBRVPDDLYARDDFSXGSBATMVKCLMFRYFVJDTXGESSBNKYRCVIQPVSWRSJFLTSKBWJEULBSHAXIFBLJUVFETSIWXVOMQZIQGROTIFJZATJGMRUKLGPVXXARZNZIOHDKEBMXBWCJXFEMJRISMWMXTBZRGHRJJPLMVENBCXVAMBQPLJOSARHUMHNDGERIZRETCHHAWKLHNALSMUYIDQTDOEWYHOVSYEEYHOGSDSFUPHVLZACLGONXRMJXYJDIESJIQAUKMMPJDCUNEEBIYBGSBVPEWILNACXNOACNRXGBZREEWPNYOZTHNRDDNEMPUFBVLFEJWMCQMHYIUPFAPAGQXFPYZXFEVUNSMSHKASMVNRGNRIETNZWQUETWFQAYQZKOUTIZRKCQFPIKVFLOYBNDOEWIZPZKPZBUIXLYKDDOYXYFRDEEQJCMCBJPYGLUZGQQFREXTOFBZQIJLKNOSYFZDZGKJCGDCYMEJZEOKKDTGSDNXWPROMUUIIAIMWIJHWUREPQZSKZFOEHUAEXEUUTKMEDMENGIOXXRXNOLPRDECCDMDFLSXDWXTZXLXVIUMFVFUBLLLFXPBLWFCBOSQHONJPRDCPLOBNVSOSMSGTWHAPXPRLRSBBMGIDXPPMBLBQHPGSOYJOVPOFVEOFRMZZWENWACOXDINWKDPUSJZMEILUEGGGLRLTTEYUZEAASYRBCRBZEBCNGSTGHGUVHIVLZDVWGHFQCNMNAEVLINVTPIDYBNSZPBABPFXGZVRXAQPMPOUZWKCWHCDUCEBGXLSGGLKWUDXQFRVNPXFKZMAWFEMQMLCQZGIVDRWKKHNBWMRKFZIXJEVTGXFCIHLZDSMLDJYZGBMCFUKYUTORCSNYMLHWWVDGZLQBXZXAUCWLIENRWSSAXJTGFANSPTXOXRUDFTQDZQFMWYSDBVZUGEAZKQFXJQPOCKEOKGINANPDDITMCZZSWAQXGDDNJPKACMUYFZUVIZGBZAWSUEAMZLTBUIGLPUNJBHYAXNDZSIEAXUAUHXUAUSXJPYLVGENESOTESEXJVZAWCJXFVRTYEYTHHPHWZXDFGULCQRXDVEYPGFCPJQDBHSEBUWPNCDHDGCNSUPZFBCSXHKGMDMBROYJYGRDHNJQPXYEZQKZRRPKCVNQJJGWJWNVGDFLNTMTHUGZNILGBXMPQZWSKOICDFYYNJGZPQZHNZGSPSTHPWSGWCWMJMHDRBZSBVLQDDRTKFGUMUZFIQKQXPWIIQDDCIMNXSDRURKKZNTSNSSTMSKVHLYVGIJJXUNUPWFFTZYHNGSNJUQGBWSPFMWPVNMGOPFDEQTHQJDLOZISCDNOVGMWNGTYWSAOUZBPPLHZFDANAAHDLADUATPUULECCJZCXHFBWADAITJZRLTFWQCTYEWUJEQFVEDIHEZNHAWSJBHIQPAGDMMLZNPYTHFDCVTBLLPKFSHZXRUIZUFDYWJRDATROUQRMCBICOAGSLEXTHBJIMQKSOTUDMFPJBIUMNQXMVTMKAZOPFFQPITJFDZCZIEYSHQHXWTIMRLGGTPRMWOMIEOPVGTYYTAZXKSUKKCBYFFBQFYFHIBNLEKHKPKLKMTKEWTJPSSPEYBDZPJTVUOPEOPAHSPTQCLHFXMCEZAWKDBDAEDOBUZIVPSVBEXVWMSMPCAWTPRVVANJERVIAFAEEHFCILYILMRUIZZLZYQVHMQCDSDAKYQUGDDLOOYQMICCOQVXCZQQFYDLBNQWRBOXEPAANCGDQPMIJYXICHZUEGBEHPSTNVSHCIKLCZRRWHTTCUTICWGJOXKRPJXHNTUNQVLRNXWKGRNYCSFCMPEXLEFWJJPCMGTPXRXPJUCOCIUDYZZWTOWUTAGVFGVXOZSRXQLHYKDUVADKQBSJATIDVRLCZTQOXKDXDSVZHJZKMRFEDFOMURSYIRDGJRYQBESVODEIQMNUHZALFYFDVDYMHSXVOOTTTUMLEYIVXYBLKJEUXPGRGYFIXCRTTCRSOQJFSCBREMOLEBMVGELURHEUFSZSDGAAWOQCBOCUYOGVBGKQNEIHYQQKMOQXJSBPRHGYKYQRCAVDQEDQYKDNZYIBGDUNUUSYMTYTDURLKEQRTILBIAETGGDSVIYDSMBRDNZWNZGSNFUCEGGBBDALMMFDGEJOMRJILKIHBLIBCCDQAMUBWXKDVLOOTVAYMHDZSZHUSOIWMJRQOJKLPYHXTPWZXFOURZWXPKXMNRRINAGEMRCMZQYDDXEULFVVNLEDBJEZZYHDQNCLDATLWQHCQSVIUEQXQFJDTCQJNPRQBIOQLWMQRWTMSIAZIAPPJBSEXSQJMSSEVCQGFHGCXLODGOQGLCFYVVOJERIRZUDREEEUXDKQPMMIEPXWSGYPNPHQLZTLYQOTACBKQNMNNEBJJFKZZDLCXKYXNQNXEMXPRWRMHJBCXCKPZBTPOAUGESFVADAWMZBFPGCUJDCERZKUHSNLEDQSFQHSAWGBBKYWLEBWQHULJHGLOCYZNWVMTRHVCGFDLEIFMMYWUKZHVLDVKRIRGLICIRALHTSPPUFTYUAZJHKWZGZWOCPIOPQBWLUNYMSLBLKCUVGVUTXQUPELXOICHPDBYYUUXWPZYYEAEJBORXRFAMXLPRJTQFCCVILTDBNXOUWTALAAMHTXHWYGEJGH'

const uniqueLetterString = (s) => {
  let ans = 0
  let map = new Map()

  for (let i = 0; i < s.length; i++) {
    if (!map.has(s[i])) {
      map.set(s[i], [])
      map.get(s[i]).push(-1)
    }
    map.get(s[i]).push(i)
  }

  for (const [_, indexes] of map.entries()) {
    indexes.push(s.length)

    for (let i = 1; i < indexes.length - 1; i++) {
      // 为什么这个公式能成立没讲清楚，可以看成是左右两边的子串进行拼接，右边含有当前独苗字符，左边不含，
      // 符合条件的子串有： count = (len - cur) + (len - cur)*(cur - 1 - pre)=(len - cur)*(cur - pre)
      ans += (indexes[i] - indexes[i - 1]) * (indexes[i + 1] - indexes[i])
    }
  }

  return ans
}

console.log(uniqueLetterString(s))
